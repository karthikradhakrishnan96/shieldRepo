<!DOCTYPE html>
<html>
    <head>
        <script
                src="https://code.jquery.com/jquery-3.2.1.min.js"
                integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
                crossorigin="anonymous"></script>
        <style>
          #loginDiv,#registerDiv {
            display:none;
          }
        </style>
        <script>
            function login()
            {
              $.ajax({
                        type: "POST",
                        url: "http://127.0.0.1:9000/loginUser",
                        dataType: 'json',
                        contentType: "application/json; charset=utf-8",
                        data: JSON.stringify({
                        "username":$("#username").val(),
                        "password":$("#password").val()
                        }),
                        success : function(){
                          console.log("Success");
                        }
                      });
            }
            function register()
            {
              $.ajax({
                        type: "POST",
                        url: "http://127.0.0.1:9000/createUser",
                        dataType: 'json',
                        contentType: "application/json; charset=utf-8",
                        data: JSON.stringify({
                        "username":$("#username").val(),
                        "password":$("#password").val(),
                        "email":$("#email").val(),
                        "firstname":$("#firstname").val(),
                        "lastname":$("#lastname").val(),
                        "lastname":$("#superpower").val(),
                        }),
                        statusCode : {
                            200: function(response){
                              console.log("Success");
                            },
                            404: function(response){

                            },
                            400: function(response){

                            },
                        }
                      });
            }
            function verify()
            {
                $.ajax
                    ({
                        type: "GET",
                        url: 'http://127.0.0.1:9000/checkUser/'+$("#username").val(),
                        statusCode : {
                            200: function(response){
                                $("#loginDiv").show();
                                $("#registerDiv").hide();
                                $("#message").val("You've already registered, login");
                                $("#btn").attr("onclick","login()");
                            },
                            404: function(response){
                                $("#registerDiv").show();
                                $("#loginDiv").show();
                                $("#message").val("Register");
                                $("#btn").attr("onclick","register()");
                            },
                            400: function(response){
                                console.log("Something went wrong :( ");
                            },
                        }
                    });
            }
        </script>
    </head>
    <body>
        <p id="message">Enter username</p>
        <br/>
        USERNAME : <input type="text" id="username"></input>
        <div id="loginDiv">
            PASSWORD : <input type="password" id="password"></input>
        </div>
        <div id="registerDiv">
          First Name : <input type="text" id="firstname"></input>
          Last Name : <input type="text" id="lastname"></input>
          Email : <input type="email" id="email"></input>
          Superpower : <input type="text" id="superpower"></input>
        </div>
        <br/>
        <button id="btn" onclick="verify()">Go</button>
    </body>
</html>
